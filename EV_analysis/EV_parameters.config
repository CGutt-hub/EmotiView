
// Reference generic config
includeConfig '../../AnalysisToolbox/Python/utils/nextflow.config'

// EmotiView Nextflow Pipeline Parameters

// Input/Output
params.input_dir           = '../../../rawData'
params.output_dir          = '../EV_results'
params.participant_pattern = 'EV_*'

// Python environment
params.python_exe          = '/home/gutt/EV_venv/bin/python3'
params.venv_path           = '/home/gutt/EV_venv'
params.txt_encoding        = 'utf-16'

// Script paths
params.txt_reader_script                = '../../AnalysisToolbox/Python/readers/txt_reader.py'
params.xdf_reader_script                = '../../AnalysisToolbox/Python/readers/xdf_reader.py'
params.file_finder_script               = '../../AnalysisToolbox/Python/utils/file_finder.py'
params.extracting_processor_script      = '../../AnalysisToolbox/Python/processors/extracting_processor.py'
params.peak_detection_processor_script  = '../../AnalysisToolbox/Python/processors/peak_detection_processor.py'
params.tree_processor_script            = '../../AnalysisToolbox/Python/processors/tree_processor.py'
params.events_processor_script          = '../../AnalysisToolbox/Python/processors/events_processor.py'
params.filtering_processor_script       = '../../AnalysisToolbox/Python/processors/filtering_processor.py'
params.epoching_processor_script        = '../../AnalysisToolbox/Python/processors/epoching_processor.py'
params.concatenating_processor_script   = '../../AnalysisToolbox/Python/processors/concatenating_processor.py'
params.relative_analyzer_script         = '../../AnalysisToolbox/Python/analyzers/relative_analyzer.py'
params.referencing_processor_script     = '../../AnalysisToolbox/Python/processors/referencing_processor.py'
params.log_transform_script             = '../../AnalysisToolbox/Python/processors/log_transform_processor.py'
params.tddr_processor_script            = '../../AnalysisToolbox/Python/processors/tddr_processor.py'
params.linear_transform_script          = '../../AnalysisToolbox/Python/processors/linear_transform_processor.py'
params.ic_analyzer_script               = '../../AnalysisToolbox/Python/analyzers/ic_analyzer.py'
params.quest_analyzer_script            = '../../AnalysisToolbox/Python/analyzers/quest_analyzer.py'
params.amplitude_analyzer_script        = '../../AnalysisToolbox/Python/analyzers/amplitude_analyzer.py'
params.interval_analyzer_script         = '../../AnalysisToolbox/Python/analyzers/interval_analyzer.py'
params.psd_analyzer_script              = '../../AnalysisToolbox/Python/analyzers/psd_analyzer.py'
params.asymmetry_analyzer_script        = '../../AnalysisToolbox/Python/analyzers/asymmetry_analyzer.py'
params.group_analyzer_script            = '../../AnalysisToolbox/Python/analyzers/group_analyzer.py'
params.merging_processor_script         = '../../AnalysisToolbox/Python/processors/merging_processor.py'
params.plotter_script                   = '../../AnalysisToolbox/Python/utils/plotter.py'
params.git_sync_script                  = '../../AnalysisToolbox/Python/utils/git_sync.py'

// Extraction
params.extraction_columns = 'EDA EKG triggerStream 8:-1'

// Tree markers
params.depth_delim        = 'Level'
params.kv_delim           = ':'
params.entry_delim        = '\\n'

// Filtering
params.eda_l_freq         = 0.05
params.eda_h_freq         = 5.0
params.ecg_l_freq         = 0.5
params.ecg_h_freq         = 40.0
params.eeg_l_freq         = 1.0
params.eeg_h_freq         = 40.0
params.sfreq              = 1000
params.ftype              = 'bandpass'
params.fnirs_l_freq       = 0.01
params.fnirs_h_freq       = 0.1
params.fnirs_sfreq        = 7.81
params.fnirs_ppf          = 6.0
params.fnirs_baseline_sec = 5.0
params.fnirs_channels     = '1:101:2'  // Skip frame(0), take 50 ch (every other = wavelength pairs from 4 duplicates)
params.ecg_channel        = 'EKG'
params.eda_channel        = 'EDA'

// Epoching
params.conds              = "['POS*', 'NEG*', 'NEU*']"
params.eeg_reference      = 'average'

// Analysis/Questionnaires
params.panas_param        = "[{'x-labels': ('panasList', 'panas'), 'y-labels': ['gar nicht', 'ein bisschen', 'einigermaßen', 'erheblich', 'äußerst'], 'data': 'panas.Choice1.Value'}]"
params.bisbas_param       = "[{'x-labels': ('bisBasList', ['Familie', 'Nervosität', 'Anstrengung', 'Ausdauer', 'Neugier', 'Kleidung', 'Energie', 'Kritikempf.', 'Zielstrebig', 'Spaßsuche', 'Zeitmanagem.', 'Chancen', 'Sorge', 'Spannung', 'Impulsiv', 'Unruhe', 'Verhalten', 'Berührbar', 'Fehlersorge', 'Abwechslung', 'Hartnäckig', 'Angstfrei', 'Wettbewerb', 'Fehlerangst']), 'y-labels': ['gar nicht', 'eher nicht', 'eher', 'genau'], 'data': 'bisBas.Choice1.Value'}]"
params.sam_param          = "['POS*', 'NEG*', 'NEU*', {'x-labels': ('samList', ['Valence', 'Arousal']), 'y-max': 9, 'y-labels': ['1', '2', '3', '4', '5', '6', '7', '8', '9'], 'data': 'SAM.Choice1.Value'}]"
params.be7_param          = "['POS*', 'NEG*', 'NEU*', {'x-labels': ('be7List', 'emotion'), 'y-labels': ['gar nicht', 'extrem'], 'y-max': 5, 'data': 'be7.Choice1.Value'}]"
params.ea11_param         = "['POS*', 'NEG*', 'NEU*', {'x-labels': ('ea11List', 'adjective'), 'y-labels': ['gar nicht', 'extrem'], 'y-max': 5, 'data': 'ea11.Choice1.Value'}]"

// Analysis/Physiology
params.bands_config       = "{'alpha': (8, 13), 'beta': (13, 30), 'theta': (4, 8)}"
params.fai_band_name      = 'alpha'
params.electrode_pairs    = "[('F3', 'F4')]"
// fNIRS ROI definitions using NIRx channel patterns (source-detector:index-wavelength format)
// Based on montage: S1+S2 = Left hemisphere, S3+S4 = Right hemisphere
// Left PFC: sources 1,2 | Right PFC: sources 3,4
params.fnirs_rois         = '{\"Left PFC\": [\"re:^[12]-\"], \"Right PFC\": [\"re:^[34]-\"]}'
params.fnirs_epoch_baseline_sec = 5.0
params.fnirs_chromophores = '{\"HbO\": \":0\$\", \"HbR\": \":1\$\"}'
// fNIRS asymmetry (hemispheric R-L difference)
params.fnirs_asym_pairs   = "[('Left PFC', 'Right PFC')]"
params.fnirs_asym_y_lim   = 0.5
params.fnirs_asym_rel_y_lim = 0.3
// Plotter parameters (questionnaires)
params.panas_plot_prefix  = 'panas'
params.bisbas_plot_prefix = 'bisbas'
params.sam_plot_prefix    = 'sam'
params.be7_plot_prefix    = 'be7'
params.ea11_plot_prefix   = 'ea11'

// Plotter parameters (physiological)
params.hrv_plot_prefix    = 'hrv'
params.eda_plot_prefix    = 'eda'
params.psd_plot_prefix    = 'psd'
params.fai_plot_prefix    = 'fai'
params.fnirs_asym_plot_prefix = 'fnirs_asym'

// Y-axis limits for physiological plots (ensures consistent scaling across participants)
params.hrv_y_lim          = 1.2
params.hrv_metrics_mode   = 'auto'  // 'auto' = both (SDNN+RMSSD), or specify single: 'SDNN', 'RMSSD'
params.eda_y_lim          = 0.5
params.psd_y_lim          = 15.0
params.fai_y_lim          = 0.4
params.fnirs_y_lim        = 0.5

// Y-axis limits for relative (NEU-baseline normalized) physiological plots
params.hrv_rel_y_lim      = 0.6
params.eda_rel_y_lim      = 0.3
params.psd_rel_y_lim      = 10.0
params.fai_rel_y_lim      = 0.3
params.fnirs_rel_y_lim    = 0.3
params.fai_combined_rel_y_lim = 0.5